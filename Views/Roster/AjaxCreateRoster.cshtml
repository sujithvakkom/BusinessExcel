

@using BusinessExcel.Models
@using BusinessExcel.Controllers
@using BootstrapHtmlHelper
@using BusinessExcel.Providers.ProviderContext
@using BusinessExcel.Providers.ProviderContext.Entities
@using BusinessExcel.Controllers.JSON


@model Roster



@using (Ajax.BeginForm(
                           actionName: BusinessExcel.Controllers.RosterController.AJAXCREATEROSTER,
                            routeValues: null,
                            ajaxOptions: new AjaxOptions()
                            {
                                UpdateTargetId = "roster-creation-form",
                                InsertionMode = InsertionMode.Replace,
                                OnSuccess = "refreshRosterList"
                            },
                            htmlAttributes: new { @class = "form-inline" })
                                                                                                                                                                )
{

    <div class="row">
        
        @*@Html.AdminLTETextBoxFor(m => m.user_id,
            null,
            new Dictionary<string, object>() { { "class", "form-control" },
                { "required", "" } },
            new Dictionary<string, object>() { { "class", "col-md-2" } },
            null, "", false, true, true)*@

        @Html.AdminLTEDropDownListFor(
                            m => m.user_id,
                            htmlLabelAttributes: null,


                              htmlDropDownAttributes: new Dictionary<string, object>() {
                                                                    { "class", "form-control select2" }

                            },
                            htmlGroupAttributes: new Dictionary<string, object>() { { "class", "col-md-3 " }, { "onChange", "SelectedUserName(this)" }  },
                            autoCompleteOptions: new AutoCompleteOptions()
                            {
                                AjaxOptions = new AjaxOptions()
                                {
                                    HttpMethod = "GET",
                                    Url = Url.Action(actionName: JSONController.USERAUTOCOMPLETER, controllerName: JSONController.JSONCONTROLLER)
                                },
                                DescriptionField = "full_name",
                                IDField = "user_name",
                                Formate = "'<tr><td>' + state.id + '</td><td><span>' + state.text + '</span></td></tr>'",
                                SelectedItem = ViewData[ReportController.SELECTED_FILTED_USER],
                                IsAutoComplete = true,
                                SelectItems = null
                            },
                            showLabel: false)

        <div class="col-md-4">

            @Html.AdminLTEDateRangePickerFor(
                 m => m.start_date,
                 m => m.end_date,
                 "Date Range",
                 htmlLabelAttributes: null,
                 htmlTextBoxAttributes: new Dictionary<string, object>() { { "class", "form-control" } },
                 htmlGroupAttributes: null,// new Dictionary<string, object>() { { "class", "col-md-4" } },
                       htmlGlyphiconsAttributes: null,
                       glyphiconsName: "fa fa-calendar",
                       showLabel: false,
                       hasValidation: true,
                       showGlyphicons: true)
        </div>
        @*@Html.AdminLTETextBoxFor(m => m.start_date, null, new Dictionary<string, object>() { { "class", "form-control" }, { "required", "" } },

                   new Dictionary<string, object>() { { "class", "col-md-2" } }, null, "", false, true, true)

            @Html.AdminLTETextBoxFor(m => m.end_date, null, new Dictionary<string, object>() { { "class", "form-control" }, { "required", "" } },

                   new Dictionary<string, object>() { { "class", "col-md-2" } }
                   , null, "", false, true, true)*@

        @*@Html.AdminLTETextBoxFor(m => m.location_id, null, new Dictionary<string, object>() { { "class", "form-control" }, { "required", "" } },


            new Dictionary<string, object>() { { "class", "col-md-2" } },

              null, "", false, true, true)*@


        @Html.AdminLTEDropDownListFor(
                            m => m.location_id,
                            htmlLabelAttributes: null,
                            htmlDropDownAttributes: new Dictionary<string, object>() {
                                                                    { "class", "form-control select2" }
                            },
                             htmlGroupAttributes: new Dictionary<string, object>() { { "class", "col-md-3" }, { "onChange", "SelectedLocationName(this)" } },
                            autoCompleteOptions: new AutoCompleteOptions()
                            {
                                AjaxOptions = new AjaxOptions()
                                {
                                    HttpMethod = "GET",
                                    Url = Url.Action(actionName: JSONController.LOCATIONAUTOCOMPLETER, controllerName: JSONController.JSONCONTROLLER)
                                },
                                DescriptionField = "description",
                                IDField = "location_id",
                                Formate = "'<tr><td>' + state.id + '</td><td><span>' + state.text + '</span></td></tr>'",
                                SelectedItem = ViewData[ReportController.SELECTED_FILTED_LOCATION],
                                IsAutoComplete = true,
                                SelectItems = null
                            },
                            showLabel: false)

        <button type="submit" class="btn btn-primary col-md-1" style="margin-left:15px">Add New</button>

        @Html.HiddenFor(x => x.user_name, new { id = "user_name" })
        @Html.HiddenFor(x => x.location_name, new { id = "location_name" })
    </div>


            <br />
            <div style="color:red;font-size:large">
                @ViewData[BusinessExcel.Controllers.RosterController.ROSTERCREATIONMESSAGE]
            </div>

}

<script>

    //To get selected value an text of dropdownlist
    function SelectedUserName(ddlObject)
    {
     
   
     
        var username = $(ddlObject).find('option:selected').text();
        $("#user_name").val(username);
  
    }

    function SelectedLocationName(ddlObject) {



        var username = $(ddlObject).find('option:selected').text();
        $("#location_name").val(username);

    }

</script>  