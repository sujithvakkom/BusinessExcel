@using BusinessExcel.Models
@using BusinessExcel.Controllers
@using BootstrapHtmlHelper
@using BusinessExcel.Providers.ProviderContext
@using BusinessExcel.Controllers.JSON

@model ItemDetailsView



<div class="box box-primary">

<div class="box-body">

    <div id="table-item-view" class="table-responsive">
        @{

            using (var db = new SalesManageDataContext())
            {
                WebGridColumn col = new WebGridColumn()
                {

                };

                int count = 0;
                IQueryable<ItemDetailsView> data = db.ItemDetailsPaging(pageNumber: ViewBag.ItemViewPage,
                            pageSize: 15,
                            sort: ViewBag.ItemViewSort,
                            sortdir: ViewBag.ItemViewDir,
                            count: out count, Filters: Model
                            );
                var grid = new WebGrid(ajaxUpdateContainerId: "table-item-view",
                                    ajaxUpdateCallback: "callBack", rowsPerPage: 15
                                                );
                grid.Bind(source: data, autoSortAndPage: false, rowCount: count);
                @grid.GetHtml(

                            tableStyle: "table table-striped table-bordered be-pagination-spl",
                            htmlAttributes: new { @id = "items" },

                            columns: new[] {
                            grid.Column(columnName:"item_code",header:"Code",format:null,style:"item_code",canSort:false),
                            grid.Column(columnName:"description",header:"Description",format:null,style:"description",canSort:false),
                            grid.Column(columnName:"model_description",header:"Model",format:null,style:"model_description",canSort:false),
                            grid.Column(columnName:"category_description",header:"Category",format:null,style:"category_description",canSort:false),
                            grid.Column(null, null, format: @<input type="hidden" name="price" class="hidprice" value="@item.price" />),


                        },
                        footerStyle: "extra-table-pager"
                        )

                @grid.PagerList(mode: WebGridPagerModes.FirstLast | WebGridPagerModes.NextPrevious | WebGridPagerModes.Numeric,
                        nextText: "NEXT",
                        firstText: "FIRST",
                        previousText: "PREV.",
                        lastText: "LAST")

            }
        }
    </div>
</div>
        </div>
<style>
      td:nth-child(n+5), th:nth-child(n+5) {
        display: none;
    }
</style>