
@using BusinessExcel.Models
@using BusinessExcel.Controllers
@using BootstrapHtmlHelper
@using BusinessExcel.Providers.ProviderContext

@model ActionViewFilters

    <!-- Content Header (Page header) -->
    <section class="content-header">
        <h1>
            @BusinessExcel.Controllers.ReportController.ACTIONS_TITLE
            <small>Report</small>
        </h1>
        <ol class="breadcrumb">
            <li><a href="#"><i class="fa fa-dashboard"></i> @BusinessExcel.Controllers.ReportController.REPORTCONTROLLER</a></li>
            <li class="active">@BusinessExcel.Controllers.ReportController.ACTIONS_TITLE</li>
        </ol>
    </section>
    <!-- Main content -->
    <section class="content">
    <!-- Your Page Content Here -->
    @using (Ajax.BeginForm(ReportController.ACTIONS,
        ReportController.REPORTCONTROLLER,
        new AjaxOptions()
        {
            UpdateTargetId = "main-body",
            OnBegin = "move('#page-load')",
            OnComplete = "ajax_call_load_complete('#page-load')",
            OnFailure = "loadin_failed"
        }))

    {
        <!-- Your Page Content Here -->
        <div class="box box-default collapsed-box">
            <div class="box-header with-border">
                <h3 class="box-title">Filters</h3>
                <div class="box-tools pull-right">
                    <button class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-plus"></i></button>
                </div><!-- /.box-tools -->
            </div><!-- /.box-header -->
            <div class="box-body">
                @Html.AntiForgeryToken()
                @Html.AdminLTETextBoxFor(
                 m => m.ItemCode,
                 null,
                 new Dictionary<string, object>() {
                                        { "class", "form-control" },
                                        { "data-inputmask" , "'mask': '999-9999-999999'" }
                     },
                 null,
                 null,
                 null,
                 true,
                 true,
                 true)
            </div>            <!-- /.box-body -->
            <div class="box-footer">
                <input type="submit" value="Filter" />
            </div>
        </div><!-- /.box -->
    }
    <div class="box box-primary">
        <div class="box-header with-border">
            <h3 class="box-title">Merchant Actions</h3>
        </div>
        <div class="box-body">

            <div id="table-daily-upate-view" class="table-responsive">
                @{

                    using (var db = new SalesManageDataContext())
                    {
                        int count = 0;
                        var data = db.DailyUpateViewPaging(pageNumber: ViewBag.DailyUpateViewPage,
                            pageSize: 20,
                            sort: ViewBag.DailyUpateViewSort,
                            sortdir: ViewBag.DailyUpateViewDir,
                            count: out count,Filters:Model
                            );
                        var grid = new WebGrid(ajaxUpdateContainerId: "table-daily-upate-view",
                            ajaxUpdateCallback: "TableDailyUpateViewCallback", rowsPerPage: 20,
                            canPage:false
                            );
                        grid.Bind(source: data, autoSortAndPage: false, rowCount: count);
                        @grid.GetHtml(
                           tableStyle: "table table-striped table-bordered",
                           htmlAttributes: new { @id = "example" },
                           columns: new[] {
                               grid.Column(columnName:"Name",header:"Name",format:null,style:"name",canSort:false),
                               grid.Column(columnName:"UserName",header:"User Name",format:null,style:"user-name",canSort:false),
                               grid.Column(columnName:"Location",header:"Location",format:null,style:"location",canSort:false),
                               grid.Column(columnName:"Brand",header:"Brand",format:null,style:"brand",canSort:false),
                               grid.Column(columnName:"Category",header:"Category",format:null,style:"category",canSort:false),
                               grid.Column(columnName:"CreateTime",header:"Create Date",format:x=>string.Format("{0:dd-MMM-yyyy}",x.CreateTime),style:"create-time",canSort:true),
                               grid.Column(columnName:"Item",header:"Item",format:null,style:"item",canSort:false),
                               grid.Column(columnName:"Description",header:"Description",format:null,style:"description",canSort:false),
                               grid.Column(columnName:"Quantity",header:"Quantity",format:x=>string.Format("{0:0.00}",x.Quantity),style:"quantity",canSort:false),
                               grid.Column(columnName:"TotalValue",header:"Value",      format:x=>string.Format("{0:0.00}",x.TotalValue),   style:"values",canSort:false)
                           }
                           )
                          
                       @grid.PagerList(mode:WebGridPagerModes.FirstLast | WebGridPagerModes.NextPrevious | WebGridPagerModes.Numeric,
                           nextText: "NEXT",
                           firstText: "FIRST",
                           previousText: "PREV.",
                           lastText: "LAST")
                    }
                }
                @Html.AdminLTEActionLink(
                   linkText: BusinessExcel.Controllers.ReportController.EXPORTEXCEL_TITLE,
                   actionName: BusinessExcel.Controllers.ReportController.EXPORTEXCEL,
                   controllerName: BusinessExcel.Controllers.ReportController.REPORTCONTROLLER,
                   cssClass: "",
                   carrot: "fa fa-download")
            </div>
        </div>
    </div>

</section><!-- /.content -->
